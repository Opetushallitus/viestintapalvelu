<div ng-controller='JalkiohjauskirjeController'>
	<input class="generate" type="number" ng-model="count" ng-change="updateGenerated()" placeholder="Generoi" maxlength="3">
	<div class="run-action btn-group">
		<button class="btn" ng-click="generatePDF()">PDF</button>
		<button class="btn" ng-click="generateZIP()">ZIP</button>
	</div>
		<table class="table">
			<tr>
				<th>Nimi</th>
				<th>Osoiterivit</th>
				<th>Postinumero</th>
				<th>Postitoimipaikka</th>
				<th>Maakunta</th>
				<th>Maa</th>
				<th>Maakoodi</th>
				<th></th>
			</tr>
			<tr>
				<td>
					<input class="input-medium input-pile" type="text" ng-model="firstName" placeholder="Etunimi">
					<input class="input-medium" type="text" ng-model="lastName" placeholder="Sukunimi">
				</td>
				<td>
					<textarea class="input-medium input-pile" ng-model="addressline" placeholder="Osoiterivi"></textarea>
					<input class="input-medium input-pile" type="text" ng-model="addressline2" placeholder="Osoiterivi">
					<input class="input-medium" type="text" ng-model="addressline3" placeholder="Osoiterivi">
				</td>
				<td><input class="input-medium" type="text" ng-model="postalCode" placeholder="Postinumero" maxlength="5"></td>
				<td><input class="input-medium" type="text" ng-model="city" placeholder="Postitoimipaikka"></td>
				<td><input class="input-medium" type="text" ng-model="region" placeholder="Maakunta"></td>
				<td><input class="input-medium" type="text" ng-model="country" placeholder="Maa"></td>
				<td><input class="input-small" type="text" ng-model="countryCode" placeholder="Maakoodi"></td>
				<td class="inline-operation"><button class="btn btn-small" ng-click="addJalkiohjauskirje()">Lis채채</button></td>
			</tr>
		</table>
		<table class="table" ng-hide="!jalkiohjauskirjeet.length">
			<tr>
				<th>Osoite</th>
				<th>Hakukohteet</th>
				<th></th>
			</tr>
			<tr ng-repeat="kirje in jalkiohjauskirjeet">
				<td class="osoite">
					<div>{{kirje.addressLabel.firstName}} {{kirje.addressLabel.lastName}}</div>
					<div>{{kirje.addressLabel.addressline}}</div>
					<div>{{kirje.addressLabel.addressline2}}</div>
					<div>{{kirje.addressLabel.addressline3}}</div>
					<div>{{kirje.addressLabel.postalCode}} {{kirje.addressLabel.city}}</div>
					<div>{{kirje.addressLabel.region}}</div>
					<div>{{kirje.addressLabel.country}} {{kirje.addressLabel.countryCode}}</div>
				</td>
				<td>
					<table class="tulokset">
						<tr>
							<th>Kohde <a href="#" ng-click="addHakukohde($index)"><i class="icon-plus"></i></a></th>
							<th>Hakijat</th>
							<th>Paikat <a href="#" ng-click="toggleColumn($index, 'aloituspaikat')"><i ng:class="{ 'icon-minus': ! isRemoved($index, 'aloituspaikat'), 'icon-plus': isRemoved($index, 'aloituspaikat') }"></i></a></th>
							<th>Varasija <a href="#" ng-click="toggleColumn($index, 'varasija')"><i ng:class="{ 'icon-minus': ! isRemoved($index, 'varasija'), 'icon-plus': isRemoved($index, 'varasija') }"></i></a></th>
							<th>Raja <a href="#" ng-click="toggleColumn($index, 'alinHyvaksytty')"><i ng:class="{ 'icon-minus': ! isRemoved($index, 'alinHyvaksytty'), 'icon-plus': isRemoved($index, 'alinHyvaksytty') }"></i></a></th>
							<th>Pisteesi <a href="#" ng-click="toggleColumn($index, 'omatPisteesi')"><i ng:class="{ 'icon-minus': ! isRemoved($index, 'omatPisteesi'), 'icon-plus': isRemoved($index, 'omatPisteesi') }"></i></a></th>
							<th>Koe <a href="#" ng-click="toggleColumn($index, 'paasyJaSoveltuvuusKoe')"><i ng:class="{ 'icon-minus': ! isRemoved($index, 'paasyJaSoveltuvuusKoe'), 'icon-plus': isRemoved($index, 'paasyJaSoveltuvuusKoe') }"></i></a></th>
							<th>Syy <a href="#" ng-click="toggleColumn($index, 'hylkayksenSyy')"><i ng:class="{ 'icon-minus': ! isRemoved($index, 'hylkayksenSyy'), 'icon-plus': isRemoved($index, 'hylkayksenSyy') }"></i></a></th>
							<th></th>
						</tr>
						<tr ng-repeat="haku in kirje.tulokset">
							<td>
								<input class="input-xlarge input-pile" type="text" ng-model="haku.koulu" placeholder="Koulu">
								<input class="input-xlarge" type="text" ng-model="haku.hakutoive" placeholder="Hakutoive">
							</td>
							<td>
								<input class="input-small input-pile" type="text" ng-model="haku.ensisijaisetHakijat" placeholder="Ensisijaiset">
								<input class="input-small" type="text" ng-model="haku.kaikkiHakijat" placeholder="Kaikki">
							</td>
							<td><input ng-disabled="isRemoved($parent.$index, 'aloituspaikat')" class="input-small" type="text" ng-model="haku.aloituspaikat" placeholder="Aloituspaikat"></td>
							<td><input ng-disabled="isRemoved($parent.$index, 'varasija')" class="input-small" type="text" ng-model="haku.varasija" placeholder="Varasija"></td>
							<td><input ng-disabled="isRemoved($parent.$index, 'alinHyvaksytty')" class="input-medium" type="text" ng-model="haku.alinHyvaksytty" placeholder="Alin hyv채ksytty"></td>
							<td><input ng-disabled="isRemoved($parent.$index, 'omatPisteesi')" class="input-small" type="text" ng-model="haku.omatPisteesi" placeholder="Omat pisteesi"></td>
							<td><input ng-disabled="isRemoved($parent.$index, 'paasyJaSoveltuvuusKoe')" class="input-small" type="text" ng-model="haku.paasyJaSoveltuvuusKoe" placeholder="Koe pisteesi"></td>
							<td><input ng-disabled="isRemoved($parent.$index, 'hylkayksenSyy')" class="input-medium" type="text" ng-model="haku.hylkayksenSyy" placeholder="Hylk채yksen syy"></td>
							<td><a href="#" ng-click="removeHakukohde($parent.$index, $index)"><i class="icon-trash"></i></a></td>
						</tr>
					</table>
				</td>
				<td class="inline-operation"><button ng-click="removeJalkiohjauskirje($index)" class="inline-operation btn btn-small">Poista</button></td>
		</tr>
	</table>
</div>
